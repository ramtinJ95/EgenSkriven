# Air configuration for hot reload
# Documentation: https://github.com/air-verse/air

# Root directory to watch
root = "."

# Temporary directory for builds
tmp_dir = ".air"

[build]
  # Command to build the application
  cmd = "go build -o .air/egenskriven ./cmd/egenskriven"
  
  # Entrypoint to run after building (replaces deprecated 'bin')
  entrypoint = [".air/egenskriven", "serve"]
  
  # File extensions to watch
  include_ext = ["go", "tpl", "tmpl"]
  
  # Directories to ignore
  # ui/ - has its own dev server in Phase 2
  # pb_data/ - database files, not source code
  # .air/ - Air's temp directory
  exclude_dir = ["ui", "pb_data", ".air", "dist", "node_modules"]
  
  # Also exclude these patterns
  exclude_file = []
  
  # Exclude files matching these regexes
  exclude_regex = ["_test.go"]
  
  # Exclude unchanged files
  exclude_unchanged = true
  
  # Follow symlinks
  follow_symlink = false
  
  # Delay before rebuilding (milliseconds)
  # Prevents rebuilding multiple times during multi-file saves
  delay = 1000
  
  # Stop running old binary before building new one
  stop_on_error = true
  
  # Send interrupt signal before killing
  send_interrupt = true
  
  # Kill delay (needed for graceful shutdown)
  kill_delay = 500

[log]
  # Show timestamps in logs
  time = true
  
  # Show main output only (not watcher messages)
  main_only = false

[color]
  # Customize colors for different log types
  main = "yellow"
  watcher = "cyan"
  build = "green"
  runner = "magenta"

[misc]
  # Clean up temp directory on exit
  clean_on_exit = true
