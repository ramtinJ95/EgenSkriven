/*
 * Animation Tokens and Keyframes
 * 
 * Timing guidelines (from ui-design.md):
 * - Hover states: 100ms
 * - Panel slide-in: 150ms
 * - Modal appear: 150ms (fade + scale from 0.95)
 * - Drag feedback: immediate
 * - Dropdown open: 100ms (fade + slide)
 */

:root {
  /* Duration tokens */
  --duration-fast: 100ms;
  --duration-normal: 150ms;
  --duration-slow: 200ms;

  /* Easing tokens */
  --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* =============================================================================
   Keyframe Animations
   ============================================================================= */

/* Fade in (modals, overlays) */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

/* Scale + fade (modals, popovers) */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes scaleOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

/* Slide from right (detail panel) */
@keyframes slideInFromRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutToRight {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

/* Slide down (dropdowns) */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Slide up (mobile bottom sheet) */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Skeleton loading pulse */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Skeleton shimmer effect */
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* =============================================================================
   Utility Classes
   ============================================================================= */

/* Apply to elements that should transition on hover */
.transition-colors {
  transition: color var(--duration-fast) ease,
              background-color var(--duration-fast) ease,
              border-color var(--duration-fast) ease;
}

.transition-transform {
  transition: transform var(--duration-fast) ease;
}

.transition-opacity {
  transition: opacity var(--duration-fast) ease;
}

.transition-all {
  transition: all var(--duration-fast) ease;
}

/* Animation classes */
.animate-fade-in {
  animation: fadeIn var(--duration-normal) ease-out;
}

.animate-scale-in {
  animation: scaleIn var(--duration-normal) ease-out;
}

.animate-slide-in-right {
  animation: slideInFromRight var(--duration-normal) ease-out;
}

.animate-slide-down {
  animation: slideDown var(--duration-fast) ease-out;
}

.animate-slide-up {
  animation: slideUp var(--duration-normal) ease-out;
}

/* Skeleton loading */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--bg-card) 25%,
    var(--bg-card-hover) 50%,
    var(--bg-card) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: var(--radius-sm);
}

/* =============================================================================
   Component-Specific Animations
   ============================================================================= */

/* Task Card Hover */
.task-card {
  transition: background-color var(--duration-fast) ease,
              border-color var(--duration-fast) ease,
              box-shadow var(--duration-fast) ease;
}

/* Task Card Drag State */
.task-card.dragging {
  box-shadow: var(--shadow-drag, 0 8px 16px rgba(0, 0, 0, 0.25));
  transform: scale(1.02);
  cursor: grabbing;
}

/* Detail Panel */
.detail-panel {
  animation: slideInFromRight var(--duration-normal) ease-out;
}

.detail-panel.closing {
  animation: slideOutToRight var(--duration-normal) ease-out;
}

/* Modal/Dialog */
.modal-overlay {
  animation: fadeIn var(--duration-normal) ease-out;
}

.modal-content {
  animation: scaleIn var(--duration-normal) ease-out;
}

/* Dropdown Menu */
.dropdown-menu {
  animation: slideDown var(--duration-fast) ease-out;
  transform-origin: top;
}

/* Command Palette */
.command-palette {
  animation: scaleIn var(--duration-normal) ease-out;
}

/* Toast Notification */
.toast {
  animation: slideDown var(--duration-normal) ease-out;
}

.toast.exiting {
  animation: fadeOut var(--duration-fast) ease-out;
}

/* =============================================================================
   Reduced Motion
   ============================================================================= */

/*
 * Respect user's motion preferences.
 * When reduced motion is preferred, use instant transitions.
 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
